"use strict";
/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
(() => {
var exports = {};
exports.id = "app/api/messages/[userId]/route";
exports.ids = ["app/api/messages/[userId]/route"];
exports.modules = {

/***/ "mongoose":
/*!***************************!*\
  !*** external "mongoose" ***!
  \***************************/
/***/ ((module) => {

module.exports = require("mongoose");

/***/ }),

/***/ "next/dist/compiled/next-server/app-page.runtime.dev.js":
/*!*************************************************************************!*\
  !*** external "next/dist/compiled/next-server/app-page.runtime.dev.js" ***!
  \*************************************************************************/
/***/ ((module) => {

module.exports = require("next/dist/compiled/next-server/app-page.runtime.dev.js");

/***/ }),

/***/ "next/dist/compiled/next-server/app-route.runtime.dev.js":
/*!**************************************************************************!*\
  !*** external "next/dist/compiled/next-server/app-route.runtime.dev.js" ***!
  \**************************************************************************/
/***/ ((module) => {

module.exports = require("next/dist/compiled/next-server/app-route.runtime.dev.js");

/***/ }),

/***/ "buffer":
/*!*************************!*\
  !*** external "buffer" ***!
  \*************************/
/***/ ((module) => {

module.exports = require("buffer");

/***/ }),

/***/ "crypto":
/*!*************************!*\
  !*** external "crypto" ***!
  \*************************/
/***/ ((module) => {

module.exports = require("crypto");

/***/ }),

/***/ "stream":
/*!*************************!*\
  !*** external "stream" ***!
  \*************************/
/***/ ((module) => {

module.exports = require("stream");

/***/ }),

/***/ "util":
/*!***********************!*\
  !*** external "util" ***!
  \***********************/
/***/ ((module) => {

module.exports = require("util");

/***/ }),

/***/ "(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Fmessages%2F%5BuserId%5D%2Froute&page=%2Fapi%2Fmessages%2F%5BuserId%5D%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fmessages%2F%5BuserId%5D%2Froute.js&appDir=C%3A%5CUsers%5CAnkur%20Ram%5COneDrive%5CDesktop%5CLawsikho%5CPOCs%5Cnext-websockets-POC%5Capp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=C%3A%5CUsers%5CAnkur%20Ram%5COneDrive%5CDesktop%5CLawsikho%5CPOCs%5Cnext-websockets-POC&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D!":
/*!*******************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************!*\
  !*** ./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Fmessages%2F%5BuserId%5D%2Froute&page=%2Fapi%2Fmessages%2F%5BuserId%5D%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fmessages%2F%5BuserId%5D%2Froute.js&appDir=C%3A%5CUsers%5CAnkur%20Ram%5COneDrive%5CDesktop%5CLawsikho%5CPOCs%5Cnext-websockets-POC%5Capp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=C%3A%5CUsers%5CAnkur%20Ram%5COneDrive%5CDesktop%5CLawsikho%5CPOCs%5Cnext-websockets-POC&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D! ***!
  \*******************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   originalPathname: () => (/* binding */ originalPathname),\n/* harmony export */   patchFetch: () => (/* binding */ patchFetch),\n/* harmony export */   requestAsyncStorage: () => (/* binding */ requestAsyncStorage),\n/* harmony export */   routeModule: () => (/* binding */ routeModule),\n/* harmony export */   serverHooks: () => (/* binding */ serverHooks),\n/* harmony export */   staticGenerationAsyncStorage: () => (/* binding */ staticGenerationAsyncStorage)\n/* harmony export */ });\n/* harmony import */ var next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! next/dist/server/future/route-modules/app-route/module.compiled */ \"(rsc)/./node_modules/next/dist/server/future/route-modules/app-route/module.compiled.js\");\n/* harmony import */ var next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var next_dist_server_future_route_kind__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! next/dist/server/future/route-kind */ \"(rsc)/./node_modules/next/dist/server/future/route-kind.js\");\n/* harmony import */ var next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! next/dist/server/lib/patch-fetch */ \"(rsc)/./node_modules/next/dist/server/lib/patch-fetch.js\");\n/* harmony import */ var next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2__);\n/* harmony import */ var C_Users_Ankur_Ram_OneDrive_Desktop_Lawsikho_POCs_next_websockets_POC_app_api_messages_userId_route_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./app/api/messages/[userId]/route.js */ \"(rsc)/./app/api/messages/[userId]/route.js\");\n\n\n\n\n// We inject the nextConfigOutput here so that we can use them in the route\n// module.\nconst nextConfigOutput = \"\"\nconst routeModule = new next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__.AppRouteRouteModule({\n    definition: {\n        kind: next_dist_server_future_route_kind__WEBPACK_IMPORTED_MODULE_1__.RouteKind.APP_ROUTE,\n        page: \"/api/messages/[userId]/route\",\n        pathname: \"/api/messages/[userId]\",\n        filename: \"route\",\n        bundlePath: \"app/api/messages/[userId]/route\"\n    },\n    resolvedPagePath: \"C:\\\\Users\\\\Ankur Ram\\\\OneDrive\\\\Desktop\\\\Lawsikho\\\\POCs\\\\next-websockets-POC\\\\app\\\\api\\\\messages\\\\[userId]\\\\route.js\",\n    nextConfigOutput,\n    userland: C_Users_Ankur_Ram_OneDrive_Desktop_Lawsikho_POCs_next_websockets_POC_app_api_messages_userId_route_js__WEBPACK_IMPORTED_MODULE_3__\n});\n// Pull out the exports that we need to expose from the module. This should\n// be eliminated when we've moved the other routes to the new format. These\n// are used to hook into the route.\nconst { requestAsyncStorage, staticGenerationAsyncStorage, serverHooks } = routeModule;\nconst originalPathname = \"/api/messages/[userId]/route\";\nfunction patchFetch() {\n    return (0,next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2__.patchFetch)({\n        serverHooks,\n        staticGenerationAsyncStorage\n    });\n}\n\n\n//# sourceMappingURL=app-route.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvbmV4dC9kaXN0L2J1aWxkL3dlYnBhY2svbG9hZGVycy9uZXh0LWFwcC1sb2FkZXIuanM/bmFtZT1hcHAlMkZhcGklMkZtZXNzYWdlcyUyRiU1QnVzZXJJZCU1RCUyRnJvdXRlJnBhZ2U9JTJGYXBpJTJGbWVzc2FnZXMlMkYlNUJ1c2VySWQlNUQlMkZyb3V0ZSZhcHBQYXRocz0mcGFnZVBhdGg9cHJpdmF0ZS1uZXh0LWFwcC1kaXIlMkZhcGklMkZtZXNzYWdlcyUyRiU1QnVzZXJJZCU1RCUyRnJvdXRlLmpzJmFwcERpcj1DJTNBJTVDVXNlcnMlNUNBbmt1ciUyMFJhbSU1Q09uZURyaXZlJTVDRGVza3RvcCU1Q0xhd3Npa2hvJTVDUE9DcyU1Q25leHQtd2Vic29ja2V0cy1QT0MlNUNhcHAmcGFnZUV4dGVuc2lvbnM9dHN4JnBhZ2VFeHRlbnNpb25zPXRzJnBhZ2VFeHRlbnNpb25zPWpzeCZwYWdlRXh0ZW5zaW9ucz1qcyZyb290RGlyPUMlM0ElNUNVc2VycyU1Q0Fua3VyJTIwUmFtJTVDT25lRHJpdmUlNUNEZXNrdG9wJTVDTGF3c2lraG8lNUNQT0NzJTVDbmV4dC13ZWJzb2NrZXRzLVBPQyZpc0Rldj10cnVlJnRzY29uZmlnUGF0aD10c2NvbmZpZy5qc29uJmJhc2VQYXRoPSZhc3NldFByZWZpeD0mbmV4dENvbmZpZ091dHB1dD0mcHJlZmVycmVkUmVnaW9uPSZtaWRkbGV3YXJlQ29uZmlnPWUzMCUzRCEiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7Ozs7O0FBQXNHO0FBQ3ZDO0FBQ2M7QUFDb0U7QUFDako7QUFDQTtBQUNBO0FBQ0Esd0JBQXdCLGdIQUFtQjtBQUMzQztBQUNBLGNBQWMseUVBQVM7QUFDdkI7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBLFlBQVk7QUFDWixDQUFDO0FBQ0Q7QUFDQTtBQUNBO0FBQ0EsUUFBUSxpRUFBaUU7QUFDekU7QUFDQTtBQUNBLFdBQVcsNEVBQVc7QUFDdEI7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUN1SDs7QUFFdkgiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9uZXh0anMtbWVzc2FnaW5nLWFwcC8/MjJmOCJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBBcHBSb3V0ZVJvdXRlTW9kdWxlIH0gZnJvbSBcIm5leHQvZGlzdC9zZXJ2ZXIvZnV0dXJlL3JvdXRlLW1vZHVsZXMvYXBwLXJvdXRlL21vZHVsZS5jb21waWxlZFwiO1xuaW1wb3J0IHsgUm91dGVLaW5kIH0gZnJvbSBcIm5leHQvZGlzdC9zZXJ2ZXIvZnV0dXJlL3JvdXRlLWtpbmRcIjtcbmltcG9ydCB7IHBhdGNoRmV0Y2ggYXMgX3BhdGNoRmV0Y2ggfSBmcm9tIFwibmV4dC9kaXN0L3NlcnZlci9saWIvcGF0Y2gtZmV0Y2hcIjtcbmltcG9ydCAqIGFzIHVzZXJsYW5kIGZyb20gXCJDOlxcXFxVc2Vyc1xcXFxBbmt1ciBSYW1cXFxcT25lRHJpdmVcXFxcRGVza3RvcFxcXFxMYXdzaWtob1xcXFxQT0NzXFxcXG5leHQtd2Vic29ja2V0cy1QT0NcXFxcYXBwXFxcXGFwaVxcXFxtZXNzYWdlc1xcXFxbdXNlcklkXVxcXFxyb3V0ZS5qc1wiO1xuLy8gV2UgaW5qZWN0IHRoZSBuZXh0Q29uZmlnT3V0cHV0IGhlcmUgc28gdGhhdCB3ZSBjYW4gdXNlIHRoZW0gaW4gdGhlIHJvdXRlXG4vLyBtb2R1bGUuXG5jb25zdCBuZXh0Q29uZmlnT3V0cHV0ID0gXCJcIlxuY29uc3Qgcm91dGVNb2R1bGUgPSBuZXcgQXBwUm91dGVSb3V0ZU1vZHVsZSh7XG4gICAgZGVmaW5pdGlvbjoge1xuICAgICAgICBraW5kOiBSb3V0ZUtpbmQuQVBQX1JPVVRFLFxuICAgICAgICBwYWdlOiBcIi9hcGkvbWVzc2FnZXMvW3VzZXJJZF0vcm91dGVcIixcbiAgICAgICAgcGF0aG5hbWU6IFwiL2FwaS9tZXNzYWdlcy9bdXNlcklkXVwiLFxuICAgICAgICBmaWxlbmFtZTogXCJyb3V0ZVwiLFxuICAgICAgICBidW5kbGVQYXRoOiBcImFwcC9hcGkvbWVzc2FnZXMvW3VzZXJJZF0vcm91dGVcIlxuICAgIH0sXG4gICAgcmVzb2x2ZWRQYWdlUGF0aDogXCJDOlxcXFxVc2Vyc1xcXFxBbmt1ciBSYW1cXFxcT25lRHJpdmVcXFxcRGVza3RvcFxcXFxMYXdzaWtob1xcXFxQT0NzXFxcXG5leHQtd2Vic29ja2V0cy1QT0NcXFxcYXBwXFxcXGFwaVxcXFxtZXNzYWdlc1xcXFxbdXNlcklkXVxcXFxyb3V0ZS5qc1wiLFxuICAgIG5leHRDb25maWdPdXRwdXQsXG4gICAgdXNlcmxhbmRcbn0pO1xuLy8gUHVsbCBvdXQgdGhlIGV4cG9ydHMgdGhhdCB3ZSBuZWVkIHRvIGV4cG9zZSBmcm9tIHRoZSBtb2R1bGUuIFRoaXMgc2hvdWxkXG4vLyBiZSBlbGltaW5hdGVkIHdoZW4gd2UndmUgbW92ZWQgdGhlIG90aGVyIHJvdXRlcyB0byB0aGUgbmV3IGZvcm1hdC4gVGhlc2Vcbi8vIGFyZSB1c2VkIHRvIGhvb2sgaW50byB0aGUgcm91dGUuXG5jb25zdCB7IHJlcXVlc3RBc3luY1N0b3JhZ2UsIHN0YXRpY0dlbmVyYXRpb25Bc3luY1N0b3JhZ2UsIHNlcnZlckhvb2tzIH0gPSByb3V0ZU1vZHVsZTtcbmNvbnN0IG9yaWdpbmFsUGF0aG5hbWUgPSBcIi9hcGkvbWVzc2FnZXMvW3VzZXJJZF0vcm91dGVcIjtcbmZ1bmN0aW9uIHBhdGNoRmV0Y2goKSB7XG4gICAgcmV0dXJuIF9wYXRjaEZldGNoKHtcbiAgICAgICAgc2VydmVySG9va3MsXG4gICAgICAgIHN0YXRpY0dlbmVyYXRpb25Bc3luY1N0b3JhZ2VcbiAgICB9KTtcbn1cbmV4cG9ydCB7IHJvdXRlTW9kdWxlLCByZXF1ZXN0QXN5bmNTdG9yYWdlLCBzdGF0aWNHZW5lcmF0aW9uQXN5bmNTdG9yYWdlLCBzZXJ2ZXJIb29rcywgb3JpZ2luYWxQYXRobmFtZSwgcGF0Y2hGZXRjaCwgIH07XG5cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWFwcC1yb3V0ZS5qcy5tYXAiXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Fmessages%2F%5BuserId%5D%2Froute&page=%2Fapi%2Fmessages%2F%5BuserId%5D%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fmessages%2F%5BuserId%5D%2Froute.js&appDir=C%3A%5CUsers%5CAnkur%20Ram%5COneDrive%5CDesktop%5CLawsikho%5CPOCs%5Cnext-websockets-POC%5Capp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=C%3A%5CUsers%5CAnkur%20Ram%5COneDrive%5CDesktop%5CLawsikho%5CPOCs%5Cnext-websockets-POC&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D!\n");

/***/ }),

/***/ "(rsc)/./app/api/messages/[userId]/route.js":
/*!********************************************!*\
  !*** ./app/api/messages/[userId]/route.js ***!
  \********************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   GET: () => (/* binding */ GET),\n/* harmony export */   POST: () => (/* binding */ POST)\n/* harmony export */ });\n/* harmony import */ var next_server__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! next/server */ \"(rsc)/./node_modules/next/dist/api/server.js\");\n/* harmony import */ var _models_database__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @/models/database */ \"(rsc)/./models/database.js\");\n/* harmony import */ var _models_database__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(_models_database__WEBPACK_IMPORTED_MODULE_1__);\n/* harmony import */ var _models__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @/models */ \"(rsc)/./models/index.js\");\n/* harmony import */ var _models__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(_models__WEBPACK_IMPORTED_MODULE_2__);\n/* harmony import */ var _lib_auth__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @/lib/auth */ \"(rsc)/./lib/auth.js\");\n/* harmony import */ var _lib_auth__WEBPACK_IMPORTED_MODULE_3___default = /*#__PURE__*/__webpack_require__.n(_lib_auth__WEBPACK_IMPORTED_MODULE_3__);\n\n\n\n\nasync function GET(request, { params }) {\n    try {\n        await _models_database__WEBPACK_IMPORTED_MODULE_1___default()();\n        const user = (0,_lib_auth__WEBPACK_IMPORTED_MODULE_3__.authenticateToken)(request);\n        const { userId } = params;\n        const messages = await _models__WEBPACK_IMPORTED_MODULE_2__.Message.find({\n            $or: [\n                {\n                    senderId: user.userId,\n                    receiverId: userId\n                },\n                {\n                    senderId: userId,\n                    receiverId: user.userId\n                }\n            ]\n        }).sort({\n            timestamp: 1\n        });\n        return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json(messages);\n    } catch (error) {\n        console.error(\"Get messages error:\", error);\n        if (error.message === \"Access token required\" || error.message === \"Invalid token\") {\n            return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n                error: error.message\n            }, {\n                status: 401\n            });\n        }\n        return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n            error: \"Server error\"\n        }, {\n            status: 500\n        });\n    }\n}\nasync function POST(request, { params }) {\n    try {\n        await _models_database__WEBPACK_IMPORTED_MODULE_1___default()();\n        const user = (0,_lib_auth__WEBPACK_IMPORTED_MODULE_3__.authenticateToken)(request);\n        const { userId } = params;\n        const { content, messageType = \"text\" } = await request.json();\n        // Validate input\n        if (!content || !content.trim()) {\n            return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n                error: \"Message content is required\"\n            }, {\n                status: 400\n            });\n        }\n        // Check if receiver exists\n        const receiver = await _models__WEBPACK_IMPORTED_MODULE_2__.User.findById(userId);\n        if (!receiver) {\n            return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n                error: \"Receiver not found\"\n            }, {\n                status: 404\n            });\n        }\n        // Create message\n        const message = new _models__WEBPACK_IMPORTED_MODULE_2__.Message({\n            senderId: user.userId,\n            receiverId: userId,\n            content: content.trim(),\n            messageType\n        });\n        await message.save();\n        // Create notification for receiver\n        const notification = new _models__WEBPACK_IMPORTED_MODULE_2__.Notification({\n            userId: userId,\n            type: \"message\",\n            title: `New message from ${user.username}`,\n            content: content.trim(),\n            data: {\n                senderId: user.userId,\n                messageId: message._id\n            }\n        });\n        await notification.save();\n        // Return the created message\n        return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n            message: \"Message sent successfully\",\n            data: {\n                id: message._id,\n                senderId: message.senderId,\n                receiverId: message.receiverId,\n                content: message.content,\n                messageType: message.messageType,\n                timestamp: message.timestamp,\n                isRead: message.isRead\n            }\n        }, {\n            status: 201\n        });\n    } catch (error) {\n        console.error(\"Send message error:\", error);\n        if (error.message === \"Access token required\" || error.message === \"Invalid token\") {\n            return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n                error: error.message\n            }, {\n                status: 401\n            });\n        }\n        return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n            error: \"Server error\"\n        }, {\n            status: 500\n        });\n    }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9hcHAvYXBpL21lc3NhZ2VzL1t1c2VySWRdL3JvdXRlLmpzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7OztBQUEyQztBQUNEO0FBQ2E7QUFDUjtBQUV4QyxlQUFlTSxJQUFJQyxPQUFPLEVBQUUsRUFBRUMsTUFBTSxFQUFFO0lBQzNDLElBQUk7UUFDRixNQUFNUCx1REFBU0E7UUFFZixNQUFNUSxPQUFPSiw0REFBaUJBLENBQUNFO1FBQy9CLE1BQU0sRUFBRUcsTUFBTSxFQUFFLEdBQUdGO1FBRW5CLE1BQU1HLFdBQVcsTUFBTVQsNENBQU9BLENBQUNVLElBQUksQ0FBQztZQUNsQ0MsS0FBSztnQkFDSDtvQkFBRUMsVUFBVUwsS0FBS0MsTUFBTTtvQkFBRUssWUFBWUw7Z0JBQU87Z0JBQzVDO29CQUFFSSxVQUFVSjtvQkFBUUssWUFBWU4sS0FBS0MsTUFBTTtnQkFBQzthQUM3QztRQUNILEdBQUdNLElBQUksQ0FBQztZQUFFQyxXQUFXO1FBQUU7UUFFdkIsT0FBT2pCLHFEQUFZQSxDQUFDa0IsSUFBSSxDQUFDUDtJQUMzQixFQUFFLE9BQU9RLE9BQU87UUFDZEMsUUFBUUQsS0FBSyxDQUFDLHVCQUF1QkE7UUFDckMsSUFBSUEsTUFBTUUsT0FBTyxLQUFLLDJCQUEyQkYsTUFBTUUsT0FBTyxLQUFLLGlCQUFpQjtZQUNsRixPQUFPckIscURBQVlBLENBQUNrQixJQUFJLENBQUM7Z0JBQUVDLE9BQU9BLE1BQU1FLE9BQU87WUFBQyxHQUFHO2dCQUFFQyxRQUFRO1lBQUk7UUFDbkU7UUFDQSxPQUFPdEIscURBQVlBLENBQUNrQixJQUFJLENBQUM7WUFBRUMsT0FBTztRQUFlLEdBQUc7WUFBRUcsUUFBUTtRQUFJO0lBQ3BFO0FBQ0Y7QUFFTyxlQUFlQyxLQUFLaEIsT0FBTyxFQUFFLEVBQUVDLE1BQU0sRUFBRTtJQUM1QyxJQUFJO1FBQ0YsTUFBTVAsdURBQVNBO1FBRWYsTUFBTVEsT0FBT0osNERBQWlCQSxDQUFDRTtRQUMvQixNQUFNLEVBQUVHLE1BQU0sRUFBRSxHQUFHRjtRQUNuQixNQUFNLEVBQUVnQixPQUFPLEVBQUVDLGNBQWMsTUFBTSxFQUFFLEdBQUcsTUFBTWxCLFFBQVFXLElBQUk7UUFFNUQsaUJBQWlCO1FBQ2pCLElBQUksQ0FBQ00sV0FBVyxDQUFDQSxRQUFRRSxJQUFJLElBQUk7WUFDL0IsT0FBTzFCLHFEQUFZQSxDQUFDa0IsSUFBSSxDQUFDO2dCQUFFQyxPQUFPO1lBQThCLEdBQUc7Z0JBQUVHLFFBQVE7WUFBSTtRQUNuRjtRQUVBLDJCQUEyQjtRQUMzQixNQUFNSyxXQUFXLE1BQU12Qix5Q0FBSUEsQ0FBQ3dCLFFBQVEsQ0FBQ2xCO1FBQ3JDLElBQUksQ0FBQ2lCLFVBQVU7WUFDYixPQUFPM0IscURBQVlBLENBQUNrQixJQUFJLENBQUM7Z0JBQUVDLE9BQU87WUFBcUIsR0FBRztnQkFBRUcsUUFBUTtZQUFJO1FBQzFFO1FBRUEsaUJBQWlCO1FBQ2pCLE1BQU1ELFVBQVUsSUFBSW5CLDRDQUFPQSxDQUFDO1lBQzFCWSxVQUFVTCxLQUFLQyxNQUFNO1lBQ3JCSyxZQUFZTDtZQUNaYyxTQUFTQSxRQUFRRSxJQUFJO1lBQ3JCRDtRQUNGO1FBRUEsTUFBTUosUUFBUVEsSUFBSTtRQUVsQixtQ0FBbUM7UUFDbkMsTUFBTUMsZUFBZSxJQUFJM0IsaURBQVlBLENBQUM7WUFDcENPLFFBQVFBO1lBQ1JxQixNQUFNO1lBQ05DLE9BQU8sQ0FBQyxpQkFBaUIsRUFBRXZCLEtBQUt3QixRQUFRLENBQUMsQ0FBQztZQUMxQ1QsU0FBU0EsUUFBUUUsSUFBSTtZQUNyQlEsTUFBTTtnQkFBRXBCLFVBQVVMLEtBQUtDLE1BQU07Z0JBQUV5QixXQUFXZCxRQUFRZSxHQUFHO1lBQUM7UUFDeEQ7UUFFQSxNQUFNTixhQUFhRCxJQUFJO1FBRXZCLDZCQUE2QjtRQUM3QixPQUFPN0IscURBQVlBLENBQUNrQixJQUFJLENBQUM7WUFDdkJHLFNBQVM7WUFDVGEsTUFBTTtnQkFDSkcsSUFBSWhCLFFBQVFlLEdBQUc7Z0JBQ2Z0QixVQUFVTyxRQUFRUCxRQUFRO2dCQUMxQkMsWUFBWU0sUUFBUU4sVUFBVTtnQkFDOUJTLFNBQVNILFFBQVFHLE9BQU87Z0JBQ3hCQyxhQUFhSixRQUFRSSxXQUFXO2dCQUNoQ1IsV0FBV0ksUUFBUUosU0FBUztnQkFDNUJxQixRQUFRakIsUUFBUWlCLE1BQU07WUFDeEI7UUFDRixHQUFHO1lBQUVoQixRQUFRO1FBQUk7SUFFbkIsRUFBRSxPQUFPSCxPQUFPO1FBQ2RDLFFBQVFELEtBQUssQ0FBQyx1QkFBdUJBO1FBQ3JDLElBQUlBLE1BQU1FLE9BQU8sS0FBSywyQkFBMkJGLE1BQU1FLE9BQU8sS0FBSyxpQkFBaUI7WUFDbEYsT0FBT3JCLHFEQUFZQSxDQUFDa0IsSUFBSSxDQUFDO2dCQUFFQyxPQUFPQSxNQUFNRSxPQUFPO1lBQUMsR0FBRztnQkFBRUMsUUFBUTtZQUFJO1FBQ25FO1FBQ0EsT0FBT3RCLHFEQUFZQSxDQUFDa0IsSUFBSSxDQUFDO1lBQUVDLE9BQU87UUFBZSxHQUFHO1lBQUVHLFFBQVE7UUFBSTtJQUNwRTtBQUNGIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vbmV4dGpzLW1lc3NhZ2luZy1hcHAvLi9hcHAvYXBpL21lc3NhZ2VzL1t1c2VySWRdL3JvdXRlLmpzPzNjZDMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgTmV4dFJlc3BvbnNlIH0gZnJvbSAnbmV4dC9zZXJ2ZXInO1xyXG5pbXBvcnQgY29ubmVjdERCIGZyb20gJ0AvbW9kZWxzL2RhdGFiYXNlJztcclxuaW1wb3J0IHsgTWVzc2FnZSwgTm90aWZpY2F0aW9uLCBVc2VyIH0gZnJvbSAnQC9tb2RlbHMnO1xyXG5pbXBvcnQgeyBhdXRoZW50aWNhdGVUb2tlbiB9IGZyb20gJ0AvbGliL2F1dGgnO1xyXG5cclxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIEdFVChyZXF1ZXN0LCB7IHBhcmFtcyB9KSB7XHJcbiAgdHJ5IHtcclxuICAgIGF3YWl0IGNvbm5lY3REQigpO1xyXG4gICAgXHJcbiAgICBjb25zdCB1c2VyID0gYXV0aGVudGljYXRlVG9rZW4ocmVxdWVzdCk7XHJcbiAgICBjb25zdCB7IHVzZXJJZCB9ID0gcGFyYW1zO1xyXG4gICAgXHJcbiAgICBjb25zdCBtZXNzYWdlcyA9IGF3YWl0IE1lc3NhZ2UuZmluZCh7XHJcbiAgICAgICRvcjogW1xyXG4gICAgICAgIHsgc2VuZGVySWQ6IHVzZXIudXNlcklkLCByZWNlaXZlcklkOiB1c2VySWQgfSxcclxuICAgICAgICB7IHNlbmRlcklkOiB1c2VySWQsIHJlY2VpdmVySWQ6IHVzZXIudXNlcklkIH1cclxuICAgICAgXVxyXG4gICAgfSkuc29ydCh7IHRpbWVzdGFtcDogMSB9KTtcclxuICAgIFxyXG4gICAgcmV0dXJuIE5leHRSZXNwb25zZS5qc29uKG1lc3NhZ2VzKTtcclxuICB9IGNhdGNoIChlcnJvcikge1xyXG4gICAgY29uc29sZS5lcnJvcignR2V0IG1lc3NhZ2VzIGVycm9yOicsIGVycm9yKTtcclxuICAgIGlmIChlcnJvci5tZXNzYWdlID09PSAnQWNjZXNzIHRva2VuIHJlcXVpcmVkJyB8fCBlcnJvci5tZXNzYWdlID09PSAnSW52YWxpZCB0b2tlbicpIHtcclxuICAgICAgcmV0dXJuIE5leHRSZXNwb25zZS5qc29uKHsgZXJyb3I6IGVycm9yLm1lc3NhZ2UgfSwgeyBzdGF0dXM6IDQwMSB9KTtcclxuICAgIH1cclxuICAgIHJldHVybiBOZXh0UmVzcG9uc2UuanNvbih7IGVycm9yOiAnU2VydmVyIGVycm9yJyB9LCB7IHN0YXR1czogNTAwIH0pO1xyXG4gIH1cclxufVxyXG5cclxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIFBPU1QocmVxdWVzdCwgeyBwYXJhbXMgfSkge1xyXG4gIHRyeSB7XHJcbiAgICBhd2FpdCBjb25uZWN0REIoKTtcclxuICAgIFxyXG4gICAgY29uc3QgdXNlciA9IGF1dGhlbnRpY2F0ZVRva2VuKHJlcXVlc3QpO1xyXG4gICAgY29uc3QgeyB1c2VySWQgfSA9IHBhcmFtcztcclxuICAgIGNvbnN0IHsgY29udGVudCwgbWVzc2FnZVR5cGUgPSAndGV4dCcgfSA9IGF3YWl0IHJlcXVlc3QuanNvbigpO1xyXG4gICAgXHJcbiAgICAvLyBWYWxpZGF0ZSBpbnB1dFxyXG4gICAgaWYgKCFjb250ZW50IHx8ICFjb250ZW50LnRyaW0oKSkge1xyXG4gICAgICByZXR1cm4gTmV4dFJlc3BvbnNlLmpzb24oeyBlcnJvcjogJ01lc3NhZ2UgY29udGVudCBpcyByZXF1aXJlZCcgfSwgeyBzdGF0dXM6IDQwMCB9KTtcclxuICAgIH1cclxuICAgIFxyXG4gICAgLy8gQ2hlY2sgaWYgcmVjZWl2ZXIgZXhpc3RzXHJcbiAgICBjb25zdCByZWNlaXZlciA9IGF3YWl0IFVzZXIuZmluZEJ5SWQodXNlcklkKTtcclxuICAgIGlmICghcmVjZWl2ZXIpIHtcclxuICAgICAgcmV0dXJuIE5leHRSZXNwb25zZS5qc29uKHsgZXJyb3I6ICdSZWNlaXZlciBub3QgZm91bmQnIH0sIHsgc3RhdHVzOiA0MDQgfSk7XHJcbiAgICB9XHJcbiAgICBcclxuICAgIC8vIENyZWF0ZSBtZXNzYWdlXHJcbiAgICBjb25zdCBtZXNzYWdlID0gbmV3IE1lc3NhZ2Uoe1xyXG4gICAgICBzZW5kZXJJZDogdXNlci51c2VySWQsXHJcbiAgICAgIHJlY2VpdmVySWQ6IHVzZXJJZCxcclxuICAgICAgY29udGVudDogY29udGVudC50cmltKCksXHJcbiAgICAgIG1lc3NhZ2VUeXBlXHJcbiAgICB9KTtcclxuICAgIFxyXG4gICAgYXdhaXQgbWVzc2FnZS5zYXZlKCk7XHJcbiAgICBcclxuICAgIC8vIENyZWF0ZSBub3RpZmljYXRpb24gZm9yIHJlY2VpdmVyXHJcbiAgICBjb25zdCBub3RpZmljYXRpb24gPSBuZXcgTm90aWZpY2F0aW9uKHtcclxuICAgICAgdXNlcklkOiB1c2VySWQsXHJcbiAgICAgIHR5cGU6ICdtZXNzYWdlJyxcclxuICAgICAgdGl0bGU6IGBOZXcgbWVzc2FnZSBmcm9tICR7dXNlci51c2VybmFtZX1gLFxyXG4gICAgICBjb250ZW50OiBjb250ZW50LnRyaW0oKSxcclxuICAgICAgZGF0YTogeyBzZW5kZXJJZDogdXNlci51c2VySWQsIG1lc3NhZ2VJZDogbWVzc2FnZS5faWQgfVxyXG4gICAgfSk7XHJcbiAgICBcclxuICAgIGF3YWl0IG5vdGlmaWNhdGlvbi5zYXZlKCk7XHJcbiAgICBcclxuICAgIC8vIFJldHVybiB0aGUgY3JlYXRlZCBtZXNzYWdlXHJcbiAgICByZXR1cm4gTmV4dFJlc3BvbnNlLmpzb24oe1xyXG4gICAgICBtZXNzYWdlOiAnTWVzc2FnZSBzZW50IHN1Y2Nlc3NmdWxseScsXHJcbiAgICAgIGRhdGE6IHtcclxuICAgICAgICBpZDogbWVzc2FnZS5faWQsXHJcbiAgICAgICAgc2VuZGVySWQ6IG1lc3NhZ2Uuc2VuZGVySWQsXHJcbiAgICAgICAgcmVjZWl2ZXJJZDogbWVzc2FnZS5yZWNlaXZlcklkLFxyXG4gICAgICAgIGNvbnRlbnQ6IG1lc3NhZ2UuY29udGVudCxcclxuICAgICAgICBtZXNzYWdlVHlwZTogbWVzc2FnZS5tZXNzYWdlVHlwZSxcclxuICAgICAgICB0aW1lc3RhbXA6IG1lc3NhZ2UudGltZXN0YW1wLFxyXG4gICAgICAgIGlzUmVhZDogbWVzc2FnZS5pc1JlYWRcclxuICAgICAgfVxyXG4gICAgfSwgeyBzdGF0dXM6IDIwMSB9KTtcclxuICAgIFxyXG4gIH0gY2F0Y2ggKGVycm9yKSB7XHJcbiAgICBjb25zb2xlLmVycm9yKCdTZW5kIG1lc3NhZ2UgZXJyb3I6JywgZXJyb3IpO1xyXG4gICAgaWYgKGVycm9yLm1lc3NhZ2UgPT09ICdBY2Nlc3MgdG9rZW4gcmVxdWlyZWQnIHx8IGVycm9yLm1lc3NhZ2UgPT09ICdJbnZhbGlkIHRva2VuJykge1xyXG4gICAgICByZXR1cm4gTmV4dFJlc3BvbnNlLmpzb24oeyBlcnJvcjogZXJyb3IubWVzc2FnZSB9LCB7IHN0YXR1czogNDAxIH0pO1xyXG4gICAgfVxyXG4gICAgcmV0dXJuIE5leHRSZXNwb25zZS5qc29uKHsgZXJyb3I6ICdTZXJ2ZXIgZXJyb3InIH0sIHsgc3RhdHVzOiA1MDAgfSk7XHJcbiAgfVxyXG59XHJcbiJdLCJuYW1lcyI6WyJOZXh0UmVzcG9uc2UiLCJjb25uZWN0REIiLCJNZXNzYWdlIiwiTm90aWZpY2F0aW9uIiwiVXNlciIsImF1dGhlbnRpY2F0ZVRva2VuIiwiR0VUIiwicmVxdWVzdCIsInBhcmFtcyIsInVzZXIiLCJ1c2VySWQiLCJtZXNzYWdlcyIsImZpbmQiLCIkb3IiLCJzZW5kZXJJZCIsInJlY2VpdmVySWQiLCJzb3J0IiwidGltZXN0YW1wIiwianNvbiIsImVycm9yIiwiY29uc29sZSIsIm1lc3NhZ2UiLCJzdGF0dXMiLCJQT1NUIiwiY29udGVudCIsIm1lc3NhZ2VUeXBlIiwidHJpbSIsInJlY2VpdmVyIiwiZmluZEJ5SWQiLCJzYXZlIiwibm90aWZpY2F0aW9uIiwidHlwZSIsInRpdGxlIiwidXNlcm5hbWUiLCJkYXRhIiwibWVzc2FnZUlkIiwiX2lkIiwiaWQiLCJpc1JlYWQiXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./app/api/messages/[userId]/route.js\n");

/***/ }),

/***/ "(rsc)/./lib/auth.js":
/*!*********************!*\
  !*** ./lib/auth.js ***!
  \*********************/
/***/ ((module, __unused_webpack_exports, __webpack_require__) => {

eval("\nconst jwt = __webpack_require__(/*! jsonwebtoken */ \"(rsc)/./node_modules/jsonwebtoken/index.js\");\nconst authenticateToken = (request)=>{\n    // Get authorization header from Next.js request\n    const authHeader = request.headers.get(\"authorization\");\n    console.log(\"Auth header:\", authHeader);\n    const token = authHeader && authHeader.split(\" \")[1];\n    console.log(\"Token:\", token ? \"Present\" : \"Missing\");\n    if (!token) {\n        throw new Error(\"Access token required\");\n    }\n    try {\n        const decoded = jwt.verify(token, process.env.JWT_SECRET);\n        console.log(\"Decoded user:\", decoded);\n        return decoded;\n    } catch (error) {\n        console.error(\"JWT verification error:\", error.message);\n        throw new Error(\"Invalid token\");\n    }\n};\nmodule.exports = {\n    authenticateToken\n};\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9saWIvYXV0aC5qcyIsIm1hcHBpbmdzIjoiO0FBQUEsTUFBTUEsTUFBTUMsbUJBQU9BLENBQUM7QUFFcEIsTUFBTUMsb0JBQW9CLENBQUNDO0lBQ3pCLGdEQUFnRDtJQUNoRCxNQUFNQyxhQUFhRCxRQUFRRSxPQUFPLENBQUNDLEdBQUcsQ0FBQztJQUN2Q0MsUUFBUUMsR0FBRyxDQUFDLGdCQUFnQko7SUFFNUIsTUFBTUssUUFBUUwsY0FBY0EsV0FBV00sS0FBSyxDQUFDLElBQUksQ0FBQyxFQUFFO0lBQ3BESCxRQUFRQyxHQUFHLENBQUMsVUFBVUMsUUFBUSxZQUFZO0lBRTFDLElBQUksQ0FBQ0EsT0FBTztRQUNWLE1BQU0sSUFBSUUsTUFBTTtJQUNsQjtJQUVBLElBQUk7UUFDRixNQUFNQyxVQUFVWixJQUFJYSxNQUFNLENBQUNKLE9BQU9LLFFBQVFDLEdBQUcsQ0FBQ0MsVUFBVTtRQUN4RFQsUUFBUUMsR0FBRyxDQUFDLGlCQUFpQkk7UUFDN0IsT0FBT0E7SUFDVCxFQUFFLE9BQU9LLE9BQU87UUFDZFYsUUFBUVUsS0FBSyxDQUFDLDJCQUEyQkEsTUFBTUMsT0FBTztRQUN0RCxNQUFNLElBQUlQLE1BQU07SUFDbEI7QUFDRjtBQUVBUSxPQUFPQyxPQUFPLEdBQUc7SUFBRWxCO0FBQWtCIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vbmV4dGpzLW1lc3NhZ2luZy1hcHAvLi9saWIvYXV0aC5qcz8yODdiIl0sInNvdXJjZXNDb250ZW50IjpbImNvbnN0IGp3dCA9IHJlcXVpcmUoJ2pzb253ZWJ0b2tlbicpO1xyXG5cclxuY29uc3QgYXV0aGVudGljYXRlVG9rZW4gPSAocmVxdWVzdCkgPT4ge1xyXG4gIC8vIEdldCBhdXRob3JpemF0aW9uIGhlYWRlciBmcm9tIE5leHQuanMgcmVxdWVzdFxyXG4gIGNvbnN0IGF1dGhIZWFkZXIgPSByZXF1ZXN0LmhlYWRlcnMuZ2V0KCdhdXRob3JpemF0aW9uJyk7XHJcbiAgY29uc29sZS5sb2coJ0F1dGggaGVhZGVyOicsIGF1dGhIZWFkZXIpO1xyXG4gIFxyXG4gIGNvbnN0IHRva2VuID0gYXV0aEhlYWRlciAmJiBhdXRoSGVhZGVyLnNwbGl0KCcgJylbMV07XHJcbiAgY29uc29sZS5sb2coJ1Rva2VuOicsIHRva2VuID8gJ1ByZXNlbnQnIDogJ01pc3NpbmcnKTtcclxuXHJcbiAgaWYgKCF0b2tlbikge1xyXG4gICAgdGhyb3cgbmV3IEVycm9yKCdBY2Nlc3MgdG9rZW4gcmVxdWlyZWQnKTtcclxuICB9XHJcblxyXG4gIHRyeSB7XHJcbiAgICBjb25zdCBkZWNvZGVkID0gand0LnZlcmlmeSh0b2tlbiwgcHJvY2Vzcy5lbnYuSldUX1NFQ1JFVCk7XHJcbiAgICBjb25zb2xlLmxvZygnRGVjb2RlZCB1c2VyOicsIGRlY29kZWQpO1xyXG4gICAgcmV0dXJuIGRlY29kZWQ7XHJcbiAgfSBjYXRjaCAoZXJyb3IpIHtcclxuICAgIGNvbnNvbGUuZXJyb3IoJ0pXVCB2ZXJpZmljYXRpb24gZXJyb3I6JywgZXJyb3IubWVzc2FnZSk7XHJcbiAgICB0aHJvdyBuZXcgRXJyb3IoJ0ludmFsaWQgdG9rZW4nKTtcclxuICB9XHJcbn07XHJcblxyXG5tb2R1bGUuZXhwb3J0cyA9IHsgYXV0aGVudGljYXRlVG9rZW4gfTtcclxuIl0sIm5hbWVzIjpbImp3dCIsInJlcXVpcmUiLCJhdXRoZW50aWNhdGVUb2tlbiIsInJlcXVlc3QiLCJhdXRoSGVhZGVyIiwiaGVhZGVycyIsImdldCIsImNvbnNvbGUiLCJsb2ciLCJ0b2tlbiIsInNwbGl0IiwiRXJyb3IiLCJkZWNvZGVkIiwidmVyaWZ5IiwicHJvY2VzcyIsImVudiIsIkpXVF9TRUNSRVQiLCJlcnJvciIsIm1lc3NhZ2UiLCJtb2R1bGUiLCJleHBvcnRzIl0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./lib/auth.js\n");

/***/ }),

/***/ "(rsc)/./models/Conversation.js":
/*!********************************!*\
  !*** ./models/Conversation.js ***!
  \********************************/
/***/ ((module, __unused_webpack_exports, __webpack_require__) => {

eval("\nconst mongoose = __webpack_require__(/*! mongoose */ \"mongoose\");\nconst conversationSchema = new mongoose.Schema({\n    participants: [\n        {\n            type: mongoose.Schema.Types.ObjectId,\n            ref: \"User\",\n            required: true\n        }\n    ],\n    messages: [\n        {\n            type: mongoose.Schema.Types.ObjectId,\n            ref: \"Message\",\n            default: []\n        }\n    ],\n    lastMessage: {\n        type: mongoose.Schema.Types.ObjectId,\n        ref: \"Message\"\n    },\n    lastMessageAt: {\n        type: Date,\n        default: Date.now\n    }\n}, {\n    timestamps: true\n});\n// Index for efficient querying\nconversationSchema.index({\n    participants: 1,\n    lastMessageAt: -1\n});\nconversationSchema.index({\n    participants: 1,\n    _id: 1\n});\n// Ensure participants array has at least 2 users\nconversationSchema.pre(\"save\", function(next) {\n    if (this.participants.length < 2) {\n        return next(new Error(\"Conversation must have at least 2 participants\"));\n    }\n    next();\n});\nmodule.exports = mongoose.model(\"Conversation\", conversationSchema);\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9tb2RlbHMvQ29udmVyc2F0aW9uLmpzIiwibWFwcGluZ3MiOiI7QUFBQSxNQUFNQSxXQUFXQyxtQkFBT0EsQ0FBQztBQUV6QixNQUFNQyxxQkFBcUIsSUFBSUYsU0FBU0csTUFBTSxDQUFDO0lBQzdDQyxjQUFjO1FBQ1o7WUFDRUMsTUFBTUwsU0FBU0csTUFBTSxDQUFDRyxLQUFLLENBQUNDLFFBQVE7WUFDcENDLEtBQUs7WUFDTEMsVUFBVTtRQUNaO0tBQ0Q7SUFDREMsVUFBVTtRQUNSO1lBQ0VMLE1BQU1MLFNBQVNHLE1BQU0sQ0FBQ0csS0FBSyxDQUFDQyxRQUFRO1lBQ3BDQyxLQUFLO1lBQ0xHLFNBQVMsRUFBRTtRQUNiO0tBQ0Q7SUFDREMsYUFBYTtRQUNYUCxNQUFNTCxTQUFTRyxNQUFNLENBQUNHLEtBQUssQ0FBQ0MsUUFBUTtRQUNwQ0MsS0FBSztJQUNQO0lBQ0FLLGVBQWU7UUFDYlIsTUFBTVM7UUFDTkgsU0FBU0csS0FBS0MsR0FBRztJQUNuQjtBQUNGLEdBQUc7SUFDREMsWUFBWTtBQUNkO0FBRUEsK0JBQStCO0FBQy9CZCxtQkFBbUJlLEtBQUssQ0FBQztJQUFFYixjQUFjO0lBQUdTLGVBQWUsQ0FBQztBQUFFO0FBQzlEWCxtQkFBbUJlLEtBQUssQ0FBQztJQUFFYixjQUFjO0lBQUdjLEtBQUs7QUFBRTtBQUVuRCxpREFBaUQ7QUFDakRoQixtQkFBbUJpQixHQUFHLENBQUMsUUFBUSxTQUFTQyxJQUFJO0lBQzFDLElBQUksSUFBSSxDQUFDaEIsWUFBWSxDQUFDaUIsTUFBTSxHQUFHLEdBQUc7UUFDaEMsT0FBT0QsS0FBSyxJQUFJRSxNQUFNO0lBQ3hCO0lBQ0FGO0FBQ0Y7QUFFQUcsT0FBT0MsT0FBTyxHQUFHeEIsU0FBU3lCLEtBQUssQ0FBQyxnQkFBZ0J2QiIsInNvdXJjZXMiOlsid2VicGFjazovL25leHRqcy1tZXNzYWdpbmctYXBwLy4vbW9kZWxzL0NvbnZlcnNhdGlvbi5qcz8zZjZkIl0sInNvdXJjZXNDb250ZW50IjpbImNvbnN0IG1vbmdvb3NlID0gcmVxdWlyZSgnbW9uZ29vc2UnKTtcclxuXHJcbmNvbnN0IGNvbnZlcnNhdGlvblNjaGVtYSA9IG5ldyBtb25nb29zZS5TY2hlbWEoe1xyXG4gIHBhcnRpY2lwYW50czogW1xyXG4gICAge1xyXG4gICAgICB0eXBlOiBtb25nb29zZS5TY2hlbWEuVHlwZXMuT2JqZWN0SWQsXHJcbiAgICAgIHJlZjogJ1VzZXInLFxyXG4gICAgICByZXF1aXJlZDogdHJ1ZVxyXG4gICAgfVxyXG4gIF0sXHJcbiAgbWVzc2FnZXM6IFtcclxuICAgIHtcclxuICAgICAgdHlwZTogbW9uZ29vc2UuU2NoZW1hLlR5cGVzLk9iamVjdElkLFxyXG4gICAgICByZWY6ICdNZXNzYWdlJyxcclxuICAgICAgZGVmYXVsdDogW11cclxuICAgIH1cclxuICBdLFxyXG4gIGxhc3RNZXNzYWdlOiB7XHJcbiAgICB0eXBlOiBtb25nb29zZS5TY2hlbWEuVHlwZXMuT2JqZWN0SWQsXHJcbiAgICByZWY6ICdNZXNzYWdlJ1xyXG4gIH0sXHJcbiAgbGFzdE1lc3NhZ2VBdDoge1xyXG4gICAgdHlwZTogRGF0ZSxcclxuICAgIGRlZmF1bHQ6IERhdGUubm93XHJcbiAgfVxyXG59LCB7XHJcbiAgdGltZXN0YW1wczogdHJ1ZVxyXG59KTtcclxuXHJcbi8vIEluZGV4IGZvciBlZmZpY2llbnQgcXVlcnlpbmdcclxuY29udmVyc2F0aW9uU2NoZW1hLmluZGV4KHsgcGFydGljaXBhbnRzOiAxLCBsYXN0TWVzc2FnZUF0OiAtMSB9KTtcclxuY29udmVyc2F0aW9uU2NoZW1hLmluZGV4KHsgcGFydGljaXBhbnRzOiAxLCBfaWQ6IDEgfSk7XHJcblxyXG4vLyBFbnN1cmUgcGFydGljaXBhbnRzIGFycmF5IGhhcyBhdCBsZWFzdCAyIHVzZXJzXHJcbmNvbnZlcnNhdGlvblNjaGVtYS5wcmUoJ3NhdmUnLCBmdW5jdGlvbihuZXh0KSB7XHJcbiAgaWYgKHRoaXMucGFydGljaXBhbnRzLmxlbmd0aCA8IDIpIHtcclxuICAgIHJldHVybiBuZXh0KG5ldyBFcnJvcignQ29udmVyc2F0aW9uIG11c3QgaGF2ZSBhdCBsZWFzdCAyIHBhcnRpY2lwYW50cycpKTtcclxuICB9XHJcbiAgbmV4dCgpO1xyXG59KTtcclxuXHJcbm1vZHVsZS5leHBvcnRzID0gbW9uZ29vc2UubW9kZWwoJ0NvbnZlcnNhdGlvbicsIGNvbnZlcnNhdGlvblNjaGVtYSk7XHJcbiJdLCJuYW1lcyI6WyJtb25nb29zZSIsInJlcXVpcmUiLCJjb252ZXJzYXRpb25TY2hlbWEiLCJTY2hlbWEiLCJwYXJ0aWNpcGFudHMiLCJ0eXBlIiwiVHlwZXMiLCJPYmplY3RJZCIsInJlZiIsInJlcXVpcmVkIiwibWVzc2FnZXMiLCJkZWZhdWx0IiwibGFzdE1lc3NhZ2UiLCJsYXN0TWVzc2FnZUF0IiwiRGF0ZSIsIm5vdyIsInRpbWVzdGFtcHMiLCJpbmRleCIsIl9pZCIsInByZSIsIm5leHQiLCJsZW5ndGgiLCJFcnJvciIsIm1vZHVsZSIsImV4cG9ydHMiLCJtb2RlbCJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./models/Conversation.js\n");

/***/ }),

/***/ "(rsc)/./models/Message.js":
/*!***************************!*\
  !*** ./models/Message.js ***!
  \***************************/
/***/ ((module, __unused_webpack_exports, __webpack_require__) => {

eval("\nconst mongoose = __webpack_require__(/*! mongoose */ \"mongoose\");\nconst { v4: uuidv4 } = __webpack_require__(/*! uuid */ \"(rsc)/./node_modules/uuid/dist/esm-node/index.js\");\nconst messageSchema = new mongoose.Schema({\n    _id: {\n        type: String,\n        default: uuidv4\n    },\n    senderId: {\n        type: String,\n        required: true\n    },\n    receiverId: {\n        type: String,\n        required: true\n    },\n    content: {\n        type: String,\n        required: true\n    },\n    messageType: {\n        type: String,\n        enum: [\n            \"text\",\n            \"image\",\n            \"file\"\n        ],\n        default: \"text\"\n    },\n    isRead: {\n        type: Boolean,\n        default: false\n    },\n    timestamp: {\n        type: Date,\n        default: Date.now\n    }\n}, {\n    timestamps: true\n});\nmodule.exports = mongoose.model(\"Message\", messageSchema);\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9tb2RlbHMvTWVzc2FnZS5qcyIsIm1hcHBpbmdzIjoiO0FBQUEsTUFBTUEsV0FBV0MsbUJBQU9BLENBQUM7QUFDekIsTUFBTSxFQUFFQyxJQUFJQyxNQUFNLEVBQUUsR0FBR0YsbUJBQU9BLENBQUM7QUFFL0IsTUFBTUcsZ0JBQWdCLElBQUlKLFNBQVNLLE1BQU0sQ0FBQztJQUN4Q0MsS0FBSztRQUFFQyxNQUFNQztRQUFRQyxTQUFTTjtJQUFPO0lBQ3JDTyxVQUFVO1FBQUVILE1BQU1DO1FBQVFHLFVBQVU7SUFBSztJQUN6Q0MsWUFBWTtRQUFFTCxNQUFNQztRQUFRRyxVQUFVO0lBQUs7SUFDM0NFLFNBQVM7UUFBRU4sTUFBTUM7UUFBUUcsVUFBVTtJQUFLO0lBQ3hDRyxhQUFhO1FBQUVQLE1BQU1DO1FBQVFPLE1BQU07WUFBQztZQUFRO1lBQVM7U0FBTztRQUFFTixTQUFTO0lBQU87SUFDOUVPLFFBQVE7UUFBRVQsTUFBTVU7UUFBU1IsU0FBUztJQUFNO0lBQ3hDUyxXQUFXO1FBQUVYLE1BQU1ZO1FBQU1WLFNBQVNVLEtBQUtDLEdBQUc7SUFBQztBQUM3QyxHQUFHO0lBQUVDLFlBQVk7QUFBSztBQUV0QkMsT0FBT0MsT0FBTyxHQUFHdkIsU0FBU3dCLEtBQUssQ0FBQyxXQUFXcEIiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9uZXh0anMtbWVzc2FnaW5nLWFwcC8uL21vZGVscy9NZXNzYWdlLmpzPzE3YTIiXSwic291cmNlc0NvbnRlbnQiOlsiY29uc3QgbW9uZ29vc2UgPSByZXF1aXJlKCdtb25nb29zZScpO1xyXG5jb25zdCB7IHY0OiB1dWlkdjQgfSA9IHJlcXVpcmUoJ3V1aWQnKTtcclxuXHJcbmNvbnN0IG1lc3NhZ2VTY2hlbWEgPSBuZXcgbW9uZ29vc2UuU2NoZW1hKHtcclxuICBfaWQ6IHsgdHlwZTogU3RyaW5nLCBkZWZhdWx0OiB1dWlkdjQgfSxcclxuICBzZW5kZXJJZDogeyB0eXBlOiBTdHJpbmcsIHJlcXVpcmVkOiB0cnVlIH0sXHJcbiAgcmVjZWl2ZXJJZDogeyB0eXBlOiBTdHJpbmcsIHJlcXVpcmVkOiB0cnVlIH0sXHJcbiAgY29udGVudDogeyB0eXBlOiBTdHJpbmcsIHJlcXVpcmVkOiB0cnVlIH0sXHJcbiAgbWVzc2FnZVR5cGU6IHsgdHlwZTogU3RyaW5nLCBlbnVtOiBbJ3RleHQnLCAnaW1hZ2UnLCAnZmlsZSddLCBkZWZhdWx0OiAndGV4dCcgfSxcclxuICBpc1JlYWQ6IHsgdHlwZTogQm9vbGVhbiwgZGVmYXVsdDogZmFsc2UgfSxcclxuICB0aW1lc3RhbXA6IHsgdHlwZTogRGF0ZSwgZGVmYXVsdDogRGF0ZS5ub3cgfVxyXG59LCB7IHRpbWVzdGFtcHM6IHRydWUgfSk7XHJcblxyXG5tb2R1bGUuZXhwb3J0cyA9IG1vbmdvb3NlLm1vZGVsKCdNZXNzYWdlJywgbWVzc2FnZVNjaGVtYSk7XHJcbiJdLCJuYW1lcyI6WyJtb25nb29zZSIsInJlcXVpcmUiLCJ2NCIsInV1aWR2NCIsIm1lc3NhZ2VTY2hlbWEiLCJTY2hlbWEiLCJfaWQiLCJ0eXBlIiwiU3RyaW5nIiwiZGVmYXVsdCIsInNlbmRlcklkIiwicmVxdWlyZWQiLCJyZWNlaXZlcklkIiwiY29udGVudCIsIm1lc3NhZ2VUeXBlIiwiZW51bSIsImlzUmVhZCIsIkJvb2xlYW4iLCJ0aW1lc3RhbXAiLCJEYXRlIiwibm93IiwidGltZXN0YW1wcyIsIm1vZHVsZSIsImV4cG9ydHMiLCJtb2RlbCJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./models/Message.js\n");

/***/ }),

/***/ "(rsc)/./models/Notification.js":
/*!********************************!*\
  !*** ./models/Notification.js ***!
  \********************************/
/***/ ((module, __unused_webpack_exports, __webpack_require__) => {

eval("\nconst mongoose = __webpack_require__(/*! mongoose */ \"mongoose\");\nconst { v4: uuidv4 } = __webpack_require__(/*! uuid */ \"(rsc)/./node_modules/uuid/dist/esm-node/index.js\");\nconst notificationSchema = new mongoose.Schema({\n    _id: {\n        type: String,\n        default: uuidv4\n    },\n    userId: {\n        type: String,\n        required: true\n    },\n    type: {\n        type: String,\n        enum: [\n            \"message\",\n            \"mention\",\n            \"system\"\n        ],\n        required: true\n    },\n    title: {\n        type: String,\n        required: true\n    },\n    content: {\n        type: String,\n        required: true\n    },\n    isRead: {\n        type: Boolean,\n        default: false\n    },\n    data: {\n        type: mongoose.Schema.Types.Mixed,\n        default: {}\n    },\n    timestamp: {\n        type: Date,\n        default: Date.now\n    }\n}, {\n    timestamps: true\n});\nmodule.exports = mongoose.model(\"Notification\", notificationSchema);\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9tb2RlbHMvTm90aWZpY2F0aW9uLmpzIiwibWFwcGluZ3MiOiI7QUFBQSxNQUFNQSxXQUFXQyxtQkFBT0EsQ0FBQztBQUN6QixNQUFNLEVBQUVDLElBQUlDLE1BQU0sRUFBRSxHQUFHRixtQkFBT0EsQ0FBQztBQUUvQixNQUFNRyxxQkFBcUIsSUFBSUosU0FBU0ssTUFBTSxDQUFDO0lBQzdDQyxLQUFLO1FBQUVDLE1BQU1DO1FBQVFDLFNBQVNOO0lBQU87SUFDckNPLFFBQVE7UUFBRUgsTUFBTUM7UUFBUUcsVUFBVTtJQUFLO0lBQ3ZDSixNQUFNO1FBQUVBLE1BQU1DO1FBQVFJLE1BQU07WUFBQztZQUFXO1lBQVc7U0FBUztRQUFFRCxVQUFVO0lBQUs7SUFDN0VFLE9BQU87UUFBRU4sTUFBTUM7UUFBUUcsVUFBVTtJQUFLO0lBQ3RDRyxTQUFTO1FBQUVQLE1BQU1DO1FBQVFHLFVBQVU7SUFBSztJQUN4Q0ksUUFBUTtRQUFFUixNQUFNUztRQUFTUCxTQUFTO0lBQU07SUFDeENRLE1BQU07UUFBRVYsTUFBTVAsU0FBU0ssTUFBTSxDQUFDYSxLQUFLLENBQUNDLEtBQUs7UUFBRVYsU0FBUyxDQUFDO0lBQUU7SUFDdkRXLFdBQVc7UUFBRWIsTUFBTWM7UUFBTVosU0FBU1ksS0FBS0MsR0FBRztJQUFDO0FBQzdDLEdBQUc7SUFBRUMsWUFBWTtBQUFLO0FBRXRCQyxPQUFPQyxPQUFPLEdBQUd6QixTQUFTMEIsS0FBSyxDQUFDLGdCQUFnQnRCIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vbmV4dGpzLW1lc3NhZ2luZy1hcHAvLi9tb2RlbHMvTm90aWZpY2F0aW9uLmpzP2RiNWMiXSwic291cmNlc0NvbnRlbnQiOlsiY29uc3QgbW9uZ29vc2UgPSByZXF1aXJlKCdtb25nb29zZScpO1xyXG5jb25zdCB7IHY0OiB1dWlkdjQgfSA9IHJlcXVpcmUoJ3V1aWQnKTtcclxuXHJcbmNvbnN0IG5vdGlmaWNhdGlvblNjaGVtYSA9IG5ldyBtb25nb29zZS5TY2hlbWEoe1xyXG4gIF9pZDogeyB0eXBlOiBTdHJpbmcsIGRlZmF1bHQ6IHV1aWR2NCB9LFxyXG4gIHVzZXJJZDogeyB0eXBlOiBTdHJpbmcsIHJlcXVpcmVkOiB0cnVlIH0sXHJcbiAgdHlwZTogeyB0eXBlOiBTdHJpbmcsIGVudW06IFsnbWVzc2FnZScsICdtZW50aW9uJywgJ3N5c3RlbSddLCByZXF1aXJlZDogdHJ1ZSB9LFxyXG4gIHRpdGxlOiB7IHR5cGU6IFN0cmluZywgcmVxdWlyZWQ6IHRydWUgfSxcclxuICBjb250ZW50OiB7IHR5cGU6IFN0cmluZywgcmVxdWlyZWQ6IHRydWUgfSxcclxuICBpc1JlYWQ6IHsgdHlwZTogQm9vbGVhbiwgZGVmYXVsdDogZmFsc2UgfSxcclxuICBkYXRhOiB7IHR5cGU6IG1vbmdvb3NlLlNjaGVtYS5UeXBlcy5NaXhlZCwgZGVmYXVsdDoge30gfSxcclxuICB0aW1lc3RhbXA6IHsgdHlwZTogRGF0ZSwgZGVmYXVsdDogRGF0ZS5ub3cgfVxyXG59LCB7IHRpbWVzdGFtcHM6IHRydWUgfSk7XHJcblxyXG5tb2R1bGUuZXhwb3J0cyA9IG1vbmdvb3NlLm1vZGVsKCdOb3RpZmljYXRpb24nLCBub3RpZmljYXRpb25TY2hlbWEpO1xyXG4iXSwibmFtZXMiOlsibW9uZ29vc2UiLCJyZXF1aXJlIiwidjQiLCJ1dWlkdjQiLCJub3RpZmljYXRpb25TY2hlbWEiLCJTY2hlbWEiLCJfaWQiLCJ0eXBlIiwiU3RyaW5nIiwiZGVmYXVsdCIsInVzZXJJZCIsInJlcXVpcmVkIiwiZW51bSIsInRpdGxlIiwiY29udGVudCIsImlzUmVhZCIsIkJvb2xlYW4iLCJkYXRhIiwiVHlwZXMiLCJNaXhlZCIsInRpbWVzdGFtcCIsIkRhdGUiLCJub3ciLCJ0aW1lc3RhbXBzIiwibW9kdWxlIiwiZXhwb3J0cyIsIm1vZGVsIl0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./models/Notification.js\n");

/***/ }),

/***/ "(rsc)/./models/User.js":
/*!************************!*\
  !*** ./models/User.js ***!
  \************************/
/***/ ((module, __unused_webpack_exports, __webpack_require__) => {

eval("\nconst mongoose = __webpack_require__(/*! mongoose */ \"mongoose\");\nconst { v4: uuidv4 } = __webpack_require__(/*! uuid */ \"(rsc)/./node_modules/uuid/dist/esm-node/index.js\");\nconst userSchema = new mongoose.Schema({\n    _id: {\n        type: String,\n        default: uuidv4\n    },\n    username: {\n        type: String,\n        required: true,\n        unique: true\n    },\n    email: {\n        type: String,\n        required: true,\n        unique: true\n    },\n    password: {\n        type: String,\n        required: true\n    },\n    avatar: {\n        type: String,\n        default: \"\"\n    },\n    isOnline: {\n        type: Boolean,\n        default: false\n    },\n    lastSeen: {\n        type: Date,\n        default: Date.now\n    }\n}, {\n    timestamps: true\n});\nmodule.exports = mongoose.model(\"User\", userSchema);\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9tb2RlbHMvVXNlci5qcyIsIm1hcHBpbmdzIjoiO0FBQUEsTUFBTUEsV0FBV0MsbUJBQU9BLENBQUM7QUFDekIsTUFBTSxFQUFFQyxJQUFJQyxNQUFNLEVBQUUsR0FBR0YsbUJBQU9BLENBQUM7QUFFL0IsTUFBTUcsYUFBYSxJQUFJSixTQUFTSyxNQUFNLENBQUM7SUFDckNDLEtBQUs7UUFBRUMsTUFBTUM7UUFBUUMsU0FBU047SUFBTztJQUNyQ08sVUFBVTtRQUFFSCxNQUFNQztRQUFRRyxVQUFVO1FBQU1DLFFBQVE7SUFBSztJQUN2REMsT0FBTztRQUFFTixNQUFNQztRQUFRRyxVQUFVO1FBQU1DLFFBQVE7SUFBSztJQUNwREUsVUFBVTtRQUFFUCxNQUFNQztRQUFRRyxVQUFVO0lBQUs7SUFDekNJLFFBQVE7UUFBRVIsTUFBTUM7UUFBUUMsU0FBUztJQUFHO0lBQ3BDTyxVQUFVO1FBQUVULE1BQU1VO1FBQVNSLFNBQVM7SUFBTTtJQUMxQ1MsVUFBVTtRQUFFWCxNQUFNWTtRQUFNVixTQUFTVSxLQUFLQyxHQUFHO0lBQUM7QUFDNUMsR0FBRztJQUFFQyxZQUFZO0FBQUs7QUFFdEJDLE9BQU9DLE9BQU8sR0FBR3ZCLFNBQVN3QixLQUFLLENBQUMsUUFBUXBCIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vbmV4dGpzLW1lc3NhZ2luZy1hcHAvLi9tb2RlbHMvVXNlci5qcz83MzY3Il0sInNvdXJjZXNDb250ZW50IjpbImNvbnN0IG1vbmdvb3NlID0gcmVxdWlyZSgnbW9uZ29vc2UnKTtcclxuY29uc3QgeyB2NDogdXVpZHY0IH0gPSByZXF1aXJlKCd1dWlkJyk7XHJcblxyXG5jb25zdCB1c2VyU2NoZW1hID0gbmV3IG1vbmdvb3NlLlNjaGVtYSh7XHJcbiAgX2lkOiB7IHR5cGU6IFN0cmluZywgZGVmYXVsdDogdXVpZHY0IH0sXHJcbiAgdXNlcm5hbWU6IHsgdHlwZTogU3RyaW5nLCByZXF1aXJlZDogdHJ1ZSwgdW5pcXVlOiB0cnVlIH0sXHJcbiAgZW1haWw6IHsgdHlwZTogU3RyaW5nLCByZXF1aXJlZDogdHJ1ZSwgdW5pcXVlOiB0cnVlIH0sXHJcbiAgcGFzc3dvcmQ6IHsgdHlwZTogU3RyaW5nLCByZXF1aXJlZDogdHJ1ZSB9LFxyXG4gIGF2YXRhcjogeyB0eXBlOiBTdHJpbmcsIGRlZmF1bHQ6ICcnIH0sXHJcbiAgaXNPbmxpbmU6IHsgdHlwZTogQm9vbGVhbiwgZGVmYXVsdDogZmFsc2UgfSxcclxuICBsYXN0U2VlbjogeyB0eXBlOiBEYXRlLCBkZWZhdWx0OiBEYXRlLm5vdyB9XHJcbn0sIHsgdGltZXN0YW1wczogdHJ1ZSB9KTtcclxuXHJcbm1vZHVsZS5leHBvcnRzID0gbW9uZ29vc2UubW9kZWwoJ1VzZXInLCB1c2VyU2NoZW1hKTtcclxuIl0sIm5hbWVzIjpbIm1vbmdvb3NlIiwicmVxdWlyZSIsInY0IiwidXVpZHY0IiwidXNlclNjaGVtYSIsIlNjaGVtYSIsIl9pZCIsInR5cGUiLCJTdHJpbmciLCJkZWZhdWx0IiwidXNlcm5hbWUiLCJyZXF1aXJlZCIsInVuaXF1ZSIsImVtYWlsIiwicGFzc3dvcmQiLCJhdmF0YXIiLCJpc09ubGluZSIsIkJvb2xlYW4iLCJsYXN0U2VlbiIsIkRhdGUiLCJub3ciLCJ0aW1lc3RhbXBzIiwibW9kdWxlIiwiZXhwb3J0cyIsIm1vZGVsIl0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./models/User.js\n");

/***/ }),

/***/ "(rsc)/./models/database.js":
/*!****************************!*\
  !*** ./models/database.js ***!
  \****************************/
/***/ ((module, __unused_webpack_exports, __webpack_require__) => {

eval("\nconst mongoose = __webpack_require__(/*! mongoose */ \"mongoose\");\nconst connectDB = async ()=>{\n    try {\n        // Check if already connected\n        if (mongoose.connection.readyState === 1) {\n            console.log(\"MongoDB already connected\");\n            return;\n        }\n        await mongoose.connect(process.env.MONGODB_URI || \"mongodb://localhost:27017/messaging-app\");\n        console.log(\"Connected to MongoDB\");\n    } catch (error) {\n        console.error(\"MongoDB connection error:\", error);\n        process.exit(1);\n    }\n};\nmodule.exports = connectDB;\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9tb2RlbHMvZGF0YWJhc2UuanMiLCJtYXBwaW5ncyI6IjtBQUFBLE1BQU1BLFdBQVdDLG1CQUFPQSxDQUFDO0FBRXpCLE1BQU1DLFlBQVk7SUFDaEIsSUFBSTtRQUNGLDZCQUE2QjtRQUM3QixJQUFJRixTQUFTRyxVQUFVLENBQUNDLFVBQVUsS0FBSyxHQUFHO1lBQ3hDQyxRQUFRQyxHQUFHLENBQUM7WUFDWjtRQUNGO1FBRUEsTUFBTU4sU0FBU08sT0FBTyxDQUFDQyxRQUFRQyxHQUFHLENBQUNDLFdBQVcsSUFBSTtRQUNsREwsUUFBUUMsR0FBRyxDQUFDO0lBQ2QsRUFBRSxPQUFPSyxPQUFPO1FBQ2ROLFFBQVFNLEtBQUssQ0FBQyw2QkFBNkJBO1FBQzNDSCxRQUFRSSxJQUFJLENBQUM7SUFDZjtBQUNGO0FBRUFDLE9BQU9DLE9BQU8sR0FBR1oiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9uZXh0anMtbWVzc2FnaW5nLWFwcC8uL21vZGVscy9kYXRhYmFzZS5qcz9hNTE0Il0sInNvdXJjZXNDb250ZW50IjpbImNvbnN0IG1vbmdvb3NlID0gcmVxdWlyZSgnbW9uZ29vc2UnKTtcclxuXHJcbmNvbnN0IGNvbm5lY3REQiA9IGFzeW5jICgpID0+IHtcclxuICB0cnkge1xyXG4gICAgLy8gQ2hlY2sgaWYgYWxyZWFkeSBjb25uZWN0ZWRcclxuICAgIGlmIChtb25nb29zZS5jb25uZWN0aW9uLnJlYWR5U3RhdGUgPT09IDEpIHtcclxuICAgICAgY29uc29sZS5sb2coJ01vbmdvREIgYWxyZWFkeSBjb25uZWN0ZWQnKTtcclxuICAgICAgcmV0dXJuO1xyXG4gICAgfVxyXG4gICAgXHJcbiAgICBhd2FpdCBtb25nb29zZS5jb25uZWN0KHByb2Nlc3MuZW52Lk1PTkdPREJfVVJJIHx8ICdtb25nb2RiOi8vbG9jYWxob3N0OjI3MDE3L21lc3NhZ2luZy1hcHAnKTtcclxuICAgIGNvbnNvbGUubG9nKCdDb25uZWN0ZWQgdG8gTW9uZ29EQicpO1xyXG4gIH0gY2F0Y2ggKGVycm9yKSB7XHJcbiAgICBjb25zb2xlLmVycm9yKCdNb25nb0RCIGNvbm5lY3Rpb24gZXJyb3I6JywgZXJyb3IpO1xyXG4gICAgcHJvY2Vzcy5leGl0KDEpO1xyXG4gIH1cclxufTtcclxuXHJcbm1vZHVsZS5leHBvcnRzID0gY29ubmVjdERCO1xyXG4iXSwibmFtZXMiOlsibW9uZ29vc2UiLCJyZXF1aXJlIiwiY29ubmVjdERCIiwiY29ubmVjdGlvbiIsInJlYWR5U3RhdGUiLCJjb25zb2xlIiwibG9nIiwiY29ubmVjdCIsInByb2Nlc3MiLCJlbnYiLCJNT05HT0RCX1VSSSIsImVycm9yIiwiZXhpdCIsIm1vZHVsZSIsImV4cG9ydHMiXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./models/database.js\n");

/***/ }),

/***/ "(rsc)/./models/index.js":
/*!*************************!*\
  !*** ./models/index.js ***!
  \*************************/
/***/ ((module, __unused_webpack_exports, __webpack_require__) => {

eval("\nconst mongoose = __webpack_require__(/*! mongoose */ \"mongoose\");\n// Check if models are already compiled\nlet User, Message, Notification, Conversation;\nif (mongoose.models.User) {\n    User = mongoose.models.User;\n} else {\n    User = __webpack_require__(/*! ./User */ \"(rsc)/./models/User.js\");\n}\nif (mongoose.models.Message) {\n    Message = mongoose.models.Message;\n} else {\n    Message = __webpack_require__(/*! ./Message */ \"(rsc)/./models/Message.js\");\n}\nif (mongoose.models.Notification) {\n    Notification = mongoose.models.Notification;\n} else {\n    Notification = __webpack_require__(/*! ./Notification */ \"(rsc)/./models/Notification.js\");\n}\nif (mongoose.models.Conversation) {\n    Conversation = mongoose.models.Conversation;\n} else {\n    Conversation = __webpack_require__(/*! ./Conversation */ \"(rsc)/./models/Conversation.js\");\n}\nmodule.exports = {\n    User,\n    Message,\n    Notification,\n    Conversation\n};\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9tb2RlbHMvaW5kZXguanMiLCJtYXBwaW5ncyI6IjtBQUFBLE1BQU1BLFdBQVdDLG1CQUFPQSxDQUFDO0FBRXpCLHVDQUF1QztBQUN2QyxJQUFJQyxNQUFNQyxTQUFTQyxjQUFjQztBQUVqQyxJQUFJTCxTQUFTTSxNQUFNLENBQUNKLElBQUksRUFBRTtJQUN4QkEsT0FBT0YsU0FBU00sTUFBTSxDQUFDSixJQUFJO0FBQzdCLE9BQU87SUFDTEEsT0FBT0QsbUJBQU9BLENBQUM7QUFDakI7QUFFQSxJQUFJRCxTQUFTTSxNQUFNLENBQUNILE9BQU8sRUFBRTtJQUMzQkEsVUFBVUgsU0FBU00sTUFBTSxDQUFDSCxPQUFPO0FBQ25DLE9BQU87SUFDTEEsVUFBVUYsbUJBQU9BLENBQUM7QUFDcEI7QUFFQSxJQUFJRCxTQUFTTSxNQUFNLENBQUNGLFlBQVksRUFBRTtJQUNoQ0EsZUFBZUosU0FBU00sTUFBTSxDQUFDRixZQUFZO0FBQzdDLE9BQU87SUFDTEEsZUFBZUgsbUJBQU9BLENBQUM7QUFDekI7QUFFQSxJQUFJRCxTQUFTTSxNQUFNLENBQUNELFlBQVksRUFBRTtJQUNoQ0EsZUFBZUwsU0FBU00sTUFBTSxDQUFDRCxZQUFZO0FBQzdDLE9BQU87SUFDTEEsZUFBZUosbUJBQU9BLENBQUM7QUFDekI7QUFFQU0sT0FBT0MsT0FBTyxHQUFHO0lBQ2ZOO0lBQ0FDO0lBQ0FDO0lBQ0FDO0FBQ0YiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9uZXh0anMtbWVzc2FnaW5nLWFwcC8uL21vZGVscy9pbmRleC5qcz83MjJiIl0sInNvdXJjZXNDb250ZW50IjpbImNvbnN0IG1vbmdvb3NlID0gcmVxdWlyZSgnbW9uZ29vc2UnKTtcclxuXHJcbi8vIENoZWNrIGlmIG1vZGVscyBhcmUgYWxyZWFkeSBjb21waWxlZFxyXG5sZXQgVXNlciwgTWVzc2FnZSwgTm90aWZpY2F0aW9uLCBDb252ZXJzYXRpb247XHJcblxyXG5pZiAobW9uZ29vc2UubW9kZWxzLlVzZXIpIHtcclxuICBVc2VyID0gbW9uZ29vc2UubW9kZWxzLlVzZXI7XHJcbn0gZWxzZSB7XHJcbiAgVXNlciA9IHJlcXVpcmUoJy4vVXNlcicpO1xyXG59XHJcblxyXG5pZiAobW9uZ29vc2UubW9kZWxzLk1lc3NhZ2UpIHtcclxuICBNZXNzYWdlID0gbW9uZ29vc2UubW9kZWxzLk1lc3NhZ2U7XHJcbn0gZWxzZSB7XHJcbiAgTWVzc2FnZSA9IHJlcXVpcmUoJy4vTWVzc2FnZScpO1xyXG59XHJcblxyXG5pZiAobW9uZ29vc2UubW9kZWxzLk5vdGlmaWNhdGlvbikge1xyXG4gIE5vdGlmaWNhdGlvbiA9IG1vbmdvb3NlLm1vZGVscy5Ob3RpZmljYXRpb247XHJcbn0gZWxzZSB7XHJcbiAgTm90aWZpY2F0aW9uID0gcmVxdWlyZSgnLi9Ob3RpZmljYXRpb24nKTtcclxufVxyXG5cclxuaWYgKG1vbmdvb3NlLm1vZGVscy5Db252ZXJzYXRpb24pIHtcclxuICBDb252ZXJzYXRpb24gPSBtb25nb29zZS5tb2RlbHMuQ29udmVyc2F0aW9uO1xyXG59IGVsc2Uge1xyXG4gIENvbnZlcnNhdGlvbiA9IHJlcXVpcmUoJy4vQ29udmVyc2F0aW9uJyk7XHJcbn1cclxuXHJcbm1vZHVsZS5leHBvcnRzID0ge1xyXG4gIFVzZXIsXHJcbiAgTWVzc2FnZSxcclxuICBOb3RpZmljYXRpb24sXHJcbiAgQ29udmVyc2F0aW9uXHJcbn07XHJcbiJdLCJuYW1lcyI6WyJtb25nb29zZSIsInJlcXVpcmUiLCJVc2VyIiwiTWVzc2FnZSIsIk5vdGlmaWNhdGlvbiIsIkNvbnZlcnNhdGlvbiIsIm1vZGVscyIsIm1vZHVsZSIsImV4cG9ydHMiXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./models/index.js\n");

/***/ })

};
;

// load runtime
var __webpack_require__ = require("../../../../webpack-runtime.js");
__webpack_require__.C(exports);
var __webpack_exec__ = (moduleId) => (__webpack_require__(__webpack_require__.s = moduleId))
var __webpack_exports__ = __webpack_require__.X(0, ["vendor-chunks/semver","vendor-chunks/next","vendor-chunks/uuid","vendor-chunks/jsonwebtoken","vendor-chunks/jws","vendor-chunks/ecdsa-sig-formatter","vendor-chunks/safe-buffer","vendor-chunks/lodash.once","vendor-chunks/lodash.isstring","vendor-chunks/lodash.isplainobject","vendor-chunks/lodash.isnumber","vendor-chunks/lodash.isinteger","vendor-chunks/lodash.isboolean","vendor-chunks/lodash.includes","vendor-chunks/jwa","vendor-chunks/buffer-equal-constant-time"], () => (__webpack_exec__("(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Fmessages%2F%5BuserId%5D%2Froute&page=%2Fapi%2Fmessages%2F%5BuserId%5D%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fmessages%2F%5BuserId%5D%2Froute.js&appDir=C%3A%5CUsers%5CAnkur%20Ram%5COneDrive%5CDesktop%5CLawsikho%5CPOCs%5Cnext-websockets-POC%5Capp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=C%3A%5CUsers%5CAnkur%20Ram%5COneDrive%5CDesktop%5CLawsikho%5CPOCs%5Cnext-websockets-POC&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D!")));
module.exports = __webpack_exports__;

})();